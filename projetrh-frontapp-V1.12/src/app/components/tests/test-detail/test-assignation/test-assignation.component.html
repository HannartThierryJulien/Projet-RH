<div class="d-flex justify-content-end m-2">
  <button
    class="rounded-pill mx-1"
    (click)="onAssignToCandidates()"
    mat-stroked-button
    color="primary">
    {{ "Assign to candidates" | translate }}
  </button>
</div>

<table mat-table [dataSource]="dataSource" matSort>

  <ng-container matColumnDef="lastname">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Last name</th>
    <td mat-cell *matCellDef="let element"> {{ element.candidate.person.firstName }}</td>
  </ng-container>

  <ng-container matColumnDef="firstname">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> First name</th>
    <td mat-cell *matCellDef="let element"> {{ element.candidate.person.lastName }}</td>
  </ng-container>

  <ng-container matColumnDef="assignationDate">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Assignation date</th>
    <td mat-cell *matCellDef="let element"> {{ element.assignationDate }}</td>
  </ng-container>

  <ng-container matColumnDef="completionDate">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Completion date</th>
    <td mat-cell *matCellDef="let element"> {{ element.completionDate }}</td>
  </ng-container>

  <ng-container matColumnDef="completionTime">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Completion time</th>
    <td mat-cell *matCellDef="let element"> {{ element.completionTime }}</td>
  </ng-container>

  <ng-container matColumnDef="obtainedPoints">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Score</th>
    <td mat-cell
        *matCellDef="let element"> {{ (element.obtainedPoints / element.test.pointsSum * 100) | number:'1.0-2' }}%
    </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef>Actions</th>
    <td mat-cell *matCellDef="let element;">
      <button mat-icon-button
              color="warn"
              (click)="openDeleteDialog(element.id, '0ms', '0ms')"
              *ngIf="!element.completionDate">
        <span class="material-symbols-outlined"> delete </span>
      </button>
      <button class="rounded-pill mx-1 d-flex "
              mat-icon-button
              color="primary"
              (cdkCopyToClipboardCopied)="onCopyLink()"
              [cdkCopyToClipboard]="location.origin+ '/tests/' + element.id + '/take'">
        <mat-icon>share</mat-icon>
      </button>
    </td>
  </ng-container>

  <!--  <ng-container matColumnDef="actions">-->
  <!--    <th mat-header-cell *matHeaderCellDef>Actions</th>-->
  <!--    <td mat-cell *matCellDef="let row;" >-->
  <!--      <button mat-icon-button [routerLink]="[row.id]">-->
  <!--        <mat-icon>launch</mat-icon>-->
  <!--      </button>-->
  <!--    </td>-->
  <!--  </ng-container>-->

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>

<mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of users"></mat-paginator>
